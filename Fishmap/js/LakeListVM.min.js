var LakeListVM=function(e){var t=this;this.filters=e,this.setCurrentLake=function(e){viewModel.setCurrentLake(e)},this.matchSearchBoxToLakeName=function(e){return-1!=e.name().toUpperCase().search(""+t.filters.searchStr().toUpperCase())},this.matchSearchBoxToSpeciesNames=function(e){var r=e.species();if(0<r.length&&0<t.filters.searchStr().length)for(var a=0;a<r.length;a++){var i=r[a];if(-1!=i.toUpperCase().search(""+t.filters.searchStr().toUpperCase()))return!0}return!1},this.filteredLakes=ko.computed(function(){var e=[];return viewModel.lakes().forEach(function(r){if(""!==r.area()&&t.filters.areaFilters()[r.area()]()){if(t.hasChosenSpecies(r)&&t.matchSearchBoxToLakeName(r))return void(e[e.length]=r);if(t.matchSearchBoxToSpeciesNames(r))return void(e[e.length]=r);if(t.noSpecies(r))return void(e[e.length]=r)}}),e}),this.hasChosenSpecies=function(e){if(0<e.species().length)for(var r=0;r<t.filters.speciesFilters().length;r++){var a=t.filters.speciesFilters()[r];if(a().value()&&-1!=$.inArray(a().name(),e.species()))return!0}return!1},this.noSpecies=function(e){return 0<e.species().length?!1:"undefined"==typeof e.latlon()?!1:0===e.latlon().length?!1:e.lat()<-90||90<e.lat()||e.lon()<-180||180<e.lon()?!1:t.filters.unknownSpecies()?!0:!1},this.loadLakeData=function(){var e=[];LakeData.forEach(function(r){var a=new LakeInfo(r.name,r.href);a.county(r.county),a.latlon(r.latlon),a.area(r.area),r.species.forEach(function(e){a.species.push(e),t.filters.addSpeciesFilter(e)}),viewModel.buildMapMarker(a),e.push(a)}),viewModel.lakes(e),t.filters.setInitialSpeciesFilterThreshold(10)}};