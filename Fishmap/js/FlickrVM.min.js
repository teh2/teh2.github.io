var FlickrVM=function(){var o=this;this.lat=ko.observable("42.105287"),this.lon=ko.observable("-87.939661"),this.setLocation=function(t,r){t>=-90&&90>=t&&r>=-180&&180>=r&&(o.lat(t),o.lon(r),o.flickrRetriever())},this.flickrThumbs=ko.observableArray(),this.numFlickrThumbs=ko.computed(function(){return o.flickrThumbs().length}),this.flickrRetriever=function(){var t="flickr.photos.search",r="5851fa6100659e952dc816ed4c670568",s="0.5",e="mi",i="url_s",l="10",a="1",c="json",n="1",h="https://api.flickr.com/services/rest/?method="+t+"&api_key="+r+"&lat="+o.lat()+"&lon="+o.lon()+"&radius="+s+"&radius_units="+e+"&extras="+i+"&per_page="+l+"$page="+a+"&format="+c+"&nojsoncallback="+n;return $.ajax({url:h,type:"get",dataType:"json",success:function(t){var r=[],s=10;t.photos.total<s&&(s=t.photos.total);for(var e=0;s>e;e++){var i=t.photos.photo[e],l={};l.pic=i.url_s,l.height="50",l.width="50",l.linkBack="https://www.flickr.com/photos/"+i.owner+"/"+i.id,r.push(l)}o.flickrThumbs(r),mapVM.displayInfo()},error:function(o,t,r){console.log("xhr.stat:"+o.status),console.log("xhr.responseText:"+o.responseText),console.log(t+":"+r)}}),!0},this.flickrAttrib=ko.computed(function(){return 0<o.numFlickrThumbs()?"Pics by flickr users":"No nearby flickr pics available"})};