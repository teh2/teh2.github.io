var FlickrVM=function(){var t=this;this.lat=ko.observable("42.105287"),this.lon=ko.observable("-87.939661"),this.setLocation=function(o,r){o>=-90&&90>=o&&r>=-180&&180>=r&&(t.lat(o),t.lon(r),t.flickrRetriever())},this.flickrThumbs=ko.observableArray(),this.numFlickrThumbs=ko.computed(function(){return t.flickrThumbs().length}),this.flickrRetriever=function(){var o="flickr.photos.search",r="5851fa6100659e952dc816ed4c670568",s="0.5",e="mi",i="url_s",l="10",c="1",a="json",n="1",h="https://api.flickr.com/services/rest/?method="+o+"&api_key="+r+"&lat="+t.lat()+"&lon="+t.lon()+"&radius="+s+"&radius_units="+e+"&extras="+i+"&per_page="+l+"$page="+c+"&format="+a+"&nojsoncallback="+n;return $.ajax({url:h,type:"get",dataType:"json",success:function(o){var r=[],s=10;o.photos.total<s&&(s=o.photos.total);for(var e=0;s>e;e++){var i=o.photos.photo[e],l={};l.pic=i.url_s,l.height="50",l.width="50",l.linkBack="https://www.flickr.com/photos/"+i.owner+"/"+i.id,r.push(l)}t.flickrThumbs(r)},error:function(t,o,r){console.log("xhr.stat:"+t.status),console.log("xhr.responseText:"+t.responseText),console.log(o+":"+r)}}),!0},this.flickrAttrib=ko.computed(function(){return 0<t.numFlickrThumbs()?"Pics by flickr users":"No nearby flickr pics available"})};