var ViewModel=function(){this.lakes=ko.observableArray(),this.filters=new Filters,this.setCurrentLake=function(e){var i=lakeInfoVM.currentLake();"undefined"!=typeof i&&i.selected(!1),e.selected(!0),lakeInfoVM.currentLake(e),$(".row-offcanvas").toggleClass("active",!1),mapVM.setupInfoWindow()},this.getCurrentLake=function(){return lakeInfoVM.currentLake()},this.getFilteredLakes=function(){return lakeListVM.filteredLakes()},this.setLocation=function(e,i){flickrVM.setLocation(e,i),panoramioVM.setLocation(e,i),mapVM.displayInfo()},this.buildMapMarker=function(e){mapVM.buildMarker(e)},this.init=function(){mapVM.wireUpMapMarkers(),lakeListVM.loadLakeData(),filtersVM.setupFiltersMenu(),panoramioVM.init(),$("#splashPage").hide(),$("#contentPage").show()}},viewModel,filtersVM,lakeListVM,mapVM,flickrVM,lakeInfoVM,panoramioVM;$(document).ready(function(){viewModel=new ViewModel,ko.applyBindings(viewModel,$("#fishmap-header")[0]),filtersVM=new FiltersVM(viewModel.filters),ko.applyBindings(filtersVM,$("#filtering")[0]),lakeListVM=new LakeListVM(viewModel.filters),ko.applyBindings(lakeListVM,$("#lakeList")[0]),mapVM=new MapVM,ko.applyBindings(mapVM,$("#mapView")[0]),lakeInfoVM=new LakeInfoVM,ko.applyBindings(lakeInfoVM,$("#lakeInfo")[0]),flickrVM=new FlickrVM,ko.applyBindings(flickrVM,$("#flickrPics")[0]),panoramioVM=new PanoramioVM,ko.applyBindings(panoramioVM,$("#panoramioPics")[0]),mapVM.loadMapApi()});